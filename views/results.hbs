<div class="max-w-5xl mx-auto bg-white dark:bg-slate-800 rounded-xl shadow-md dark:shadow-slate-700 p-6 mt-6 transition-all duration-200">
    {{#if isCached}}
    <div class="bg-amber-50 dark:bg-amber-900/30 border-l-4 border-amber-400 dark:border-amber-600 p-4 mb-6 rounded-lg">
        <div class="flex">
            <div class="flex-shrink-0">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-amber-400 dark:text-amber-300" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                </svg>
            </div>
            <div class="ml-3">
                <p class="text-sm text-amber-700 dark:text-amber-200">
                    These are stored results from the database. Last updated: {{lastUpdated}}
                </p>
            </div>
        </div>
    </div>
    {{else}}
    {{#if lastUpdated}}
    <div class="bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-400 dark:border-blue-600 p-4 mb-6 rounded-lg">
        <div class="flex">
            <div class="flex-shrink-0">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-400 dark:text-blue-300" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                </svg>
            </div>
            <div class="ml-3">
                <p class="text-sm text-blue-700 dark:text-blue-200">
                    Results last updated: {{lastUpdated}}
                </p>
            </div>
        </div>
    </div>
    {{/if}}
    {{/if}}

    <div class="mb-8">
        <h2 class="text-2xl font-semibold mb-6 text-slate-800 dark:text-white flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-slate-600 dark:text-slate-300" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
            </svg>
            Student Details
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
            <div class="p-4 bg-slate-50 dark:bg-slate-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md">
                <p class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">Name</p>
                <p class="font-semibold text-slate-800 dark:text-white text-lg">{{result.studentDetails.Name}}</p>
            </div>
            <div class="p-4 bg-slate-50 dark:bg-slate-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md">
                <p class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">Register Number</p>
                <p class="font-semibold text-slate-800 dark:text-white text-lg">{{result.studentDetails.[Register Number]}}</p>
            </div>
            <div class="p-4 bg-slate-50 dark:bg-slate-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md">
                <p class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">College</p>
                <p class="font-semibold text-slate-800 dark:text-white text-lg">{{result.studentDetails.[Name Of College]}}</p>
            </div>
            <div class="p-4 bg-slate-50 dark:bg-slate-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md">
                <p class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">Branch</p>
                <p class="font-semibold text-slate-800 dark:text-white text-lg">{{result.studentDetails.Branch}}</p>
            </div>
        </div>
    </div>

    <div class="mb-8">
        <h2 class="text-2xl font-semibold mb-6 text-slate-800 dark:text-white flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-slate-600 dark:text-slate-300" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z" />
            </svg>
            Course Results
        </h2>
        <div class="overflow-x-auto bg-white dark:bg-slate-800 rounded-xl shadow-md">
            <table class="min-w-full divide-y divide-slate-200 dark:divide-slate-700">
                <thead class="bg-slate-50 dark:bg-slate-700">
                    <tr>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">Course Name</th>
                        <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">Grade</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">Code</th>
                        <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">Credits</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">Exam Month</th>
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700">
                    {{#each result.results.courses}}
                    <tr class="hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors">
                        <td class="px-6 py-4 whitespace-normal text-sm font-medium text-slate-900 dark:text-white">{{courseName}}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-center">
                            {{!-- Grade colors based on precedence --}}
                            <span class="px-3 py-1 inline-flex text-xs leading-5 font-bold rounded-full 
                                {{#if (eq grade 'S')}}bg-grade-s/20 text-grade-s border border-grade-s/20
                                {{else if (eq grade 'A+')}}bg-grade-a-plus/20 text-grade-a-plus border border-grade-a-plus/20
                                {{else if (eq grade 'A')}}bg-grade-a/20 text-grade-a border border-grade-a/20
                                {{else if (eq grade 'B+')}}bg-grade-b-plus/20 text-grade-b-plus border border-grade-b-plus/20
                                {{else if (eq grade 'B')}}bg-grade-b/20 text-grade-b border border-grade-b/20
                                {{else if (eq grade 'C+')}}bg-grade-c-plus/20 text-grade-c-plus border border-grade-c-plus/20
                                {{else if (eq grade 'C')}}bg-grade-c/20 text-grade-c border border-grade-c/20
                                {{else if (eq grade 'D')}}bg-grade-d/20 text-grade-d border border-grade-d/20
                                {{else if (eq grade 'P')}}bg-grade-p/20 text-grade-p border border-grade-p/20
                                {{else}}bg-grade-f/20 text-grade-f border border-grade-f/20{{/if}}
                                dark:bg-opacity-30">
                                {{grade}}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300 font-mono">{{code}}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-slate-700 dark:text-slate-300">{{credits}}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300">{{examMonth}}</td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        <div class="p-6 bg-slate-50 dark:bg-slate-700 rounded-lg shadow-md transition-all duration-200">
            <div class="flex items-center mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600 dark:text-blue-400" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
                </svg>
                <p class="text-blue-600 dark:text-blue-400 font-medium">SGPA</p>
            </div>
            <p class="text-3xl font-bold text-slate-800 dark:text-white">{{result.results.sgpa}}</p>
        </div>
        <div class="p-6 bg-slate-50 dark:bg-slate-700 rounded-lg shadow-md transition-all duration-200">
            <div class="flex items-center mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-600 dark:text-green-400" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <p class="text-green-600 dark:text-green-400 font-medium">Total Credits</p>
            </div>
            <p class="text-3xl font-bold text-slate-800 dark:text-white">{{result.results.totalCredits}}</p>
        </div>
    </div>

    <div class="flex justify-center">
        <a href="/" class="inline-flex items-center px-5 py-2.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-900 dark:bg-slate-700 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:focus:ring-offset-slate-800 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z" clip-rule="evenodd" />
            </svg>
            Check Another Result
        </a>
    </div>
</div> 